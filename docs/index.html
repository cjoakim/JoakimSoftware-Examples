# JoakimSoftware-Examples

Examples and starter projects in various programming languages and frameworks,
focusing on Azure Cosmos DB and Azure PostgreSQL.

## Links 

- https://learn.microsoft.com/en-us/azure/cosmos-db/partitioning-overview
- https://learn.microsoft.com/en-us/azure/cosmos-db/media/partitioning-overview/logical-partitions.png
- https://learn.microsoft.com/en-us/azure/cosmos-db/request-units
- https://learn.microsoft.com/en-us/azure/cosmos-db/nosql/query/
- https://learn.microsoft.com/en-us/azure/cosmos-db/nosql/sdk-python

--- 

## Assignment #1 - Intro to Cosmos DB

- Review the above Links
- Clone/fork this repo
- Provision a Cosmos DB Serverless account
- Configure the necessary environment variables (see the root README.md file)
- Use the \python_fastapi directory
- OpenFlights data is in the data/openflights/ directory
- Load the openflights airports into a Cosmos DB container
  - python main_nosql.py load_openflights
- Execute Query and CRUD operations
  - python main_nosql.py test_cosmos_nosql dev 1000 test 0 /pk
  - Explore the Cosmos DB SQL syntax
    - https://learn.microsoft.com/en-us/azure/cosmos-db/nosql/query/
- Next assignment will use this same dataset

```
(venv) PS ...\python_fastapi> python main_nosql.py
Usage:
    python main_nosql.py list_standard_envvars
    python main_nosql.py log_standard_envvars
    python main_nosql.py load_openflights
    python main_nosql.py test_cosmos_nosql dbname, db_ru, cname, c_ru, pkpath
    python main_nosql.py test_cosmos_nosql dev 1000 test 0 /pk
    python main_nosql.py test_cosmos_nosql dev 1000 app 0 /pk
    python main_nosql.py test_cosmos_nosql dev 0 test 400 /pk
```

--- 

## Assignment #2 - Geospatial and GeoJSON

### Links

- See https://learn.microsoft.com/en-us/azure/cosmos-db/nosql/query/geospatial?tabs=javascript
- https://learn.microsoft.com/en-us/azure/cosmos-db/nosql/how-to-geospatial-index-query

### Assignment

- Wrangle the Airport data such that it has a GeoJSON location attribute (example below)
- Load the enhanced Airport data, with GeoJSON location, to Cosmos DB
- Create the appropriate geospatial index if necessary

```
{
  ...
  "location": {
    "type": "Point",
    "coordinates": [
      -122.12826822304672,
      47.63980239335718
    ]
  },
  ...
}
```

- Query for the 20 airports closest to CLT and SEA 
- Query for the list of airports in Connecticut
  - use a Polygon of GPS coordinates as a bounding box
  - use just four GPS coordinates for the Polygon, a rough rectangle
  - ignore the rectangular irregularities 
    - Fairfield County towards NYC 
    - The "Southwick Jog" along the North border

- Extra Credit:
  - Same exercise for Washington State, but with a Polygon that closely aligns to the actual State border